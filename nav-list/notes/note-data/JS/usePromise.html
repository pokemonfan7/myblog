<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport"
	      content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Alexz的博客网站</title>
	<link rel="stylesheet" href="./style.css">
</head>
<body>
<nav class="navbar-fixed-top">
	<div class="container">
		<div class="fl">
			<a class="logo" href="../../../../index.html"></a>
		</div>
		<ul class="nav-left fl">
			<li class="fl"><a href="../../../../index.html">首页</a></li>
			<li class="fl"><a href="../../../works/works.html">我的作品</a></li>
			<li class="fl"><a href="../../../notes/notes.html">我的笔记</a></li>
			<li class="fl"><a class="new" href="../../../demos/demos.html">我的demo</a></li>
		</ul>
		<ul class="nav-right fr">
			<li class="fl"><a id="backToTop"></a></li>
			<li class="fl"><a class="login" href="">登录</a></li>
			<li class="fl"><a class="register" href="">注册</a></li>
		</ul>
	</div>
</nav>
<main>
	<article class="fl">
		<div class="article-head">
			<h1>Promise应用</h1>
		</div>
		<div class="article-body">
			<p>Promise封装XMLHttpRequest</p>
			<pre>function ajax(url){
	return new Promise(function(resolve,reject){
		var aJax=new XMLHttpRequest();
		aJax.open("GET",url,true);
		aJax.onload=resolve;
		aJax.onerror=reject;
		aJax.send();
	})
}
ajax("https://5ab1cc2362a6ae001408c195.mockapi.io/blog-list")
    .then(function(res){console.log(res.target.responseText)})
    .catch(function(err){console.log(err)});</pre>
	<p>每隔一秒输出数字</p>
			<pre>const tasks=[];
const output=(i)=>
	new Promise((resolve)=>{
		setTimeout(()=>{
			console.log(i);
			resolve();
		},i*1000);
	});

for(var i=0;i<5;i++){
	tasks.push(output(i));
}

Promise.all(tasks).then(
	()=>{
		setTimeout(()=>{
			console.log(i);
		},1000);
	}
);</pre>
<pre>const output=(i)=>new Promise((resolve)=>{
	setTimeout(()=>{console.log(i);resolve();},1000);
});

(async ()=>{
	for(var i=0;i<5;i++){
		await output(i);
	}
	await output(i);
})()
</pre>
<pre>const output=(i)=>new Promise((resolve)=>{
	setTimeout(resolve,1000);
});

(async ()=>{
	for(var i=0;i<5;i++){
		await output(i);console.log(i);
	}
	await output(i);console.log(i);
})()</pre>
			<p>隔n秒输出n</p>
			<pre>const output=(i)=>new Promise((resolve)=>{
	setTimeout(()=>{console.log(i);resolve();},i*1000);
});

(async ()=>{
	for(var i=0;i<5;i++){
		await output(i);
	}
	await output(i);
})()</pre>
		</div>
	</article>
	<aside class="fr">
		<div class="aside-head">目录</div>
		<div class="aside-body">
		</div>
	</aside>
</main>
<script src="./index.js"></script>
</body>
</html>